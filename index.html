<!DOCTYPE html>
<html lang="pt" data-lang="pt">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ActivEU – Solidarity Action Day em Portugal</title>
  <meta name="description" content="ActivEU implementa em Portugal o Solidarity Action Day: experiência real, doação transparente e competências certificadas."/>
  <meta name="theme-color" content="#fbf4e4"/>

  <!-- Fonts: condensed display + clean body -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Rough.js (hand-drawn UI) -->
  <script defer src="https://cdn.jsdelivr.net/npm/roughjs@4.5.2/bundled/rough.js"></script>

  <!-- Fuse.js (search palette) -->
  <script defer src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">

  <style>
    :root{
      --paper:#fbf4e4;
      --paper2:#fff7ea;
      --ink:#140a12;
      --burg:#3a0520;
      --burg2:#5b0b31;
      --mint:#b9f3c8;
      --mint2:#ddffe6;
      --sun:#ffd56b;
      --lav:#e9d7ff;
      --sky:#bfe9ff;

      --stroke: rgba(20,10,18,.85);
      --strokeSoft: rgba(20,10,18,.18);

      --shadow: 0 18px 60px rgba(0,0,0,.14);
      --shadowSoft: 0 12px 28px rgba(0,0,0,.10);

      --r: 22px;
      --max: 1200px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--paper);
      color: var(--ink);
      overflow-x:hidden;
      -webkit-font-smoothing: antialiased;
      text-rendering: geometricPrecision;
    }
    a{ color:inherit; text-decoration:none; }
    button{ font:inherit; }

    .wrap{ max-width: var(--max); margin:0 auto; padding: 0 18px; }

    /* paper texture + halftone */
    .paperBg{
      position:fixed; inset:0;
      z-index:-3;
      background:
        radial-gradient(1200px 700px at 12% 0%, rgba(255,255,255,.65), transparent 58%),
        radial-gradient(900px 600px at 88% 10%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(900px 700px at 70% 90%, rgba(255,255,255,.25), transparent 60%);
      pointer-events:none;
    }
    .grain{
      position:fixed; inset:-40%;
      z-index:-2;
      pointer-events:none;
      opacity:.12;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='320'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='320' height='320' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      transform:rotate(6deg);
    }
    .halftone{
      position:fixed; inset:-10%;
      z-index:-1;
      pointer-events:none;
      opacity:.22;
      background:
        radial-gradient(circle, rgba(58,5,32,.12) 1px, transparent 1.6px) 0 0/8px 8px;
      mask-image: radial-gradient(700px 520px at 50% 16%, black 35%, transparent 72%);
    }

    /* scroll progress */
    .progress{
      position:fixed; top:0; left:0;
      height:3px; width:0%;
      z-index:999;
      background: linear-gradient(90deg, var(--sun), var(--burg));
    }

    /* header */
    header{
      position:sticky; top:0; z-index:50;
      background: rgba(251,244,228,.82);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding: 12px 0;
      gap: 12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .logoMark{
      width:34px; height:34px;
      border-radius: 12px;
      background: var(--mint2);
      border: 1.6px solid var(--strokeSoft);
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      display:grid; place-items:center;
      font-weight: 900;
      color: var(--burg);
    }
    .brand small{
      display:block;
      margin-top:2px;
      font-size: 11px;
      opacity:.72;
      font-weight:800;
    }

    .links{
      display:flex; gap:16px; align-items:center;
      font-size: 12px;
      opacity:.92;
      white-space:nowrap;
    }
    .links a{
      position:relative;
      padding: 6px 2px;
      font-weight: 800;
    }
    .links a[data-active="true"]::after,
    .links a:hover::after{
      content:"";
      position:absolute; left:0; right:0; bottom:2px;
      height: 2px;
      background: var(--ink);
      transform: rotate(-.4deg);
      opacity:.75;
    }

    .actions{
      display:flex; align-items:center; gap:10px;
    }
    .pill{
      border-radius: 999px;
      border: 1.6px solid rgba(0,0,0,.14);
      background: #fff;
      padding: 8px 12px;
      font-weight: 900;
      box-shadow: 0 10px 20px rgba(0,0,0,.07);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .pill .kbd{
      font-size: 11px;
      opacity:.65;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px dashed rgba(0,0,0,.24);
      background: rgba(255,255,255,.75);
      font-weight: 900;
    }
    .menuBtn{
      border-radius: 999px;
      border: 1.8px solid rgba(0,0,0,.14);
      background: var(--mint);
      padding: 8px 14px;
      font-weight: 900;
      box-shadow: 0 10px 20px rgba(0,0,0,.07);
      cursor:pointer;
    }

    /* drawer */
    .drawer{ position:fixed; inset:0; display:none; z-index:200; }
    .drawer[data-open="true"]{ display:block; }
    .drawer .bg{ position:absolute; inset:0; background: rgba(0,0,0,.35); backdrop-filter: blur(4px); }
    .drawer .panel{
      position:absolute; right:0; top:0; height:100%;
      width: min(420px, 92vw);
      background: var(--paper2);
      border-left: 2px solid rgba(0,0,0,.12);
      box-shadow: var(--shadow);
      padding: 18px;
      display:flex; flex-direction:column; gap: 12px;
    }
    .drawer h3{
      margin:0;
      font-family: "Bebas Neue", sans-serif;
      font-size: 28px;
      letter-spacing: .8px;
      color: var(--burg);
    }
    .dLink{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px 12px;
      border-radius: 16px;
      background: #fff;
      border: 1.6px solid rgba(0,0,0,.12);
      box-shadow: 0 12px 18px rgba(0,0,0,.08);
      font-weight: 900;
    }
    .dLink span{ opacity:.65; font-weight: 900; }

    /* hero */
    .hero{
      padding: 34px 0 24px;
      position:relative;
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items:start;
    }
    .heroTitle{
      font-family:"Bebas Neue", sans-serif;
      font-size: clamp(72px, 12vw, 178px);
      line-height:.84;
      letter-spacing: 1px;
      color: var(--burg);
      margin: 18px 0 10px;
      text-shadow: 0 18px 50px rgba(58,5,32,.10);
    }
    .tagline{
      font-weight: 900;
      font-size: clamp(18px, 2.6vw, 38px);
      letter-spacing: -0.7px;
      max-width: 560px;
    }
    .micro{
      margin-top: 10px;
      font-size: 13px;
      opacity:.78;
      max-width: 520px;
      line-height: 1.5;
    }
    .ctaRow{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 14px;
      align-items:center;
    }
    .cta{
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,.14);
      background: var(--sun);
      padding: 10px 16px;
      font-weight: 1000;
      cursor:pointer;
      box-shadow: 0 14px 22px rgba(0,0,0,.10);
    }
    .cta.secondary{ background:#fff; }

    /* stickers (wiggle + magnet hover) */
    .sticker{
      position:absolute;
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 12px;
      font-weight: 1000;
      border: 1.6px solid rgba(0,0,0,.14);
      background: #fff;
      box-shadow: 0 16px 24px rgba(0,0,0,.10);
      user-select:none;
      transform: rotate(var(--rot, 0deg));
      transition: transform .12s ease;
      will-change: transform;
    }
    .sticker[data-tone="mint"]{ background: var(--mint2); }
    .sticker[data-tone="lav"]{ background: var(--lav); }
    .sticker[data-tone="sky"]{ background: var(--sky); }
    .sticker[data-tone="sun"]{ background: #fff2c9; }
    @keyframes wiggle{
      0%,100%{ transform: translateY(0) rotate(var(--rot,0deg)); }
      50%{ transform: translateY(-2px) rotate(calc(var(--rot,0deg) + .6deg)); }
    }
    .sticker{ animation: wiggle 3.2s ease-in-out infinite; }

    /* scribbles */
    .scribble{
      position:absolute;
      pointer-events:none;
      opacity:.92;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,.10));
    }

    /* right hero card (hand-drawn border drawn later) */
    .heroCard{
      position:relative;
      background: rgba(255,255,255,.62);
      border-radius: var(--r);
      padding: 16px;
      box-shadow: var(--shadowSoft);
      overflow:hidden;
    }
    .rings{
      position:absolute; inset:-50%;
      background:
        radial-gradient(circle at 50% 40%, rgba(255,88,210,.16) 0%, rgba(255,88,210,.08) 18%, transparent 40%),
        repeating-radial-gradient(circle at 50% 40%, rgba(58,5,32,.10) 0px, rgba(58,5,32,.10) 3px, rgba(251,244,228,0) 16px, rgba(251,244,228,0) 28px);
      transform: rotate(5deg);
      opacity:.95;
    }
    .heroCard .inner{ position:relative; }
    .heroCard h2{
      margin:0;
      font-family:"Bebas Neue", sans-serif;
      font-size: 34px;
      letter-spacing:.7px;
      color: var(--burg);
    }
    .heroCard p{
      margin: 10px 0 0;
      font-size: 13px;
      opacity:.82;
      line-height:1.5;
    }
    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    .stat{
      background: rgba(255,255,255,.72);
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(0,0,0,.08); /* replaced by rough border */
      box-shadow: 0 12px 18px rgba(0,0,0,.07);
      position:relative;
    }
    .stat b{
      display:block;
      font-family:"Bebas Neue", sans-serif;
      font-size: 28px;
      letter-spacing:.6px;
      line-height:1;
      color: var(--ink);
    }
    .stat span{
      font-size: 12px;
      opacity:.75;
      font-weight: 800;
    }

    /* sections */
    section{ padding: 76px 0; position:relative; }
    .head{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap: 16px;
      margin-bottom: 20px;
    }
    .kicker{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      font-weight: 1000;
      font-size: 12px;
      border-radius: 999px;
      padding: 7px 10px;
      background:#fff;
      border:1px solid rgba(0,0,0,.10); /* rough later */
      box-shadow: 0 12px 18px rgba(0,0,0,.06);
    }
    .kicker i{
      width:10px; height:10px;
      border-radius:50%;
      background: var(--mint);
      border: 1.6px solid rgba(0,0,0,.14);
      display:inline-block;
    }
    .sectionTitle{
      margin: 10px 0 0;
      font-family:"Bebas Neue", sans-serif;
      font-size: clamp(38px, 5vw, 74px);
      line-height: .92;
      letter-spacing: .8px;
      color: var(--burg);
    }
    .lead{
      margin: 10px 0 0;
      font-size: 14px;
      opacity:.80;
      max-width: 560px;
      line-height:1.5;
      font-weight: 600;
    }

    /* scallops */
    .scallopTop,.scallopBottom{
      position:absolute; left:0; right:0;
      height: 38px;
      background: var(--paper);
      pointer-events:none;
      z-index:2;
    }
    .scallopTop{ top:-1px; }
    .scallopBottom{ bottom:-1px; transform: rotate(180deg); }
    .scallopTop::before,.scallopBottom::before{
      content:"";
      position:absolute; left:0; right:0; top:-1px;
      height: 40px;
      background: radial-gradient(circle at 20px 20px, transparent 19px, var(--paper) 20px) 0 0/40px 40px;
    }

    /* cards grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      position:relative;
      z-index:3;
    }
    .card{
      grid-column: span 6;
      background: rgba(255,255,255,.68);
      border-radius: var(--r);
      padding: 16px;
      box-shadow: var(--shadowSoft);
      position:relative;
      overflow:hidden;
    }
    .card h3{ margin:0; font-size: 16px; font-weight: 1000; letter-spacing:-.2px; }
    .card p{ margin: 8px 0 0; font-size: 13px; opacity:.84; line-height:1.5; font-weight: 600; }
    .badge{
      position:absolute; top: 12px; right: 12px;
      font-size: 11px;
      font-weight: 1000;
      padding: 6px 10px;
      border-radius: 999px;
      background:#fff;
      border:1px solid rgba(0,0,0,.10); /* rough later */
      transform: rotate(2deg);
    }
    .card.full{ grid-column: span 12; }

    /* Impact Lab */
    .impact{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    .panel{
      background: rgba(255,255,255,.70);
      border-radius: var(--r);
      padding: 16px;
      box-shadow: var(--shadowSoft);
      position:relative;
      overflow:hidden;
    }
    .panel h3{
      margin:0;
      font-family:"Bebas Neue", sans-serif;
      font-size: 34px;
      letter-spacing:.7px;
      color: var(--burg);
      line-height:1;
    }
    .panel p{
      margin: 10px 0 0;
      font-size: 13px;
      opacity:.82;
      line-height:1.5;
      font-weight: 600;
    }
    .controls{
      display:grid;
      gap: 12px;
      margin-top: 12px;
    }
    .row{
      display:grid;
      gap: 6px;
    }
    label{
      font-size: 12px;
      font-weight: 900;
      opacity:.82;
    }
    select, input[type="range"]{
      width: 100%;
    }
    select{
      padding: 10px 10px;
      border-radius: 14px;
      border: 1.6px solid rgba(0,0,0,.14);
      background:#fff;
      font-weight: 900;
      outline:none;
    }
    .out{
      margin-top: 12px;
      padding: 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.80);
      border:1px solid rgba(0,0,0,.10); /* rough later */
      box-shadow: 0 12px 18px rgba(0,0,0,.08);
      font-size: 13px;
      line-height:1.55;
      font-weight: 700;
      opacity:.9;
      white-space:pre-line;
    }
    .tiny{
      margin-top: 8px;
      font-size: 12px;
      opacity:.72;
      font-weight: 700;
      line-height:1.45;
    }

    /* palette */
    .palette{
      position:fixed; inset:0; z-index:250; display:none;
    }
    .palette[data-open="true"]{ display:block; }
    .palette .bg{
      position:absolute; inset:0;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(6px);
    }
    .palette .modal{
      position:absolute;
      left:50%; top: 14%;
      transform: translateX(-50%);
      width: min(760px, 92vw);
      background: var(--paper2);
      border-radius: 24px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .palette .top{
      padding: 14px;
      border-bottom: 1px solid rgba(0,0,0,.10);
      display:flex; gap: 10px; align-items:center;
      background: rgba(255,255,255,.55);
    }
    .palette input{
      width:100%;
      border-radius: 14px;
      border: 1.6px solid rgba(0,0,0,.12);
      padding: 12px 12px;
      outline:none;
      background:#fff;
      font-weight: 900;
    }
    .palette .hint{
      font-size: 12px;
      opacity:.7;
      font-weight: 1000;
      white-space:nowrap;
    }
    .list{
      max-height: 380px;
      overflow:auto;
      padding: 10px;
      display:grid;
      gap: 8px;
    }
    .item{
      padding: 12px 12px;
      border-radius: 16px;
      background:#fff;
      border:1px solid rgba(0,0,0,.10); /* rough later */
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      font-weight: 1000;
      box-shadow: 0 12px 18px rgba(0,0,0,.08);
    }
    .item small{ opacity:.65; font-weight: 1000; }

    /* voice bubble */
    .voice{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      font-size: 12px;
      font-weight: 1000;
      padding: 7px 10px;
      border-radius: 999px;
      background: #fff;
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 12px 18px rgba(0,0,0,.08);
      cursor:pointer;
    }
    .micDot{
      width: 10px; height:10px; border-radius:50%;
      border: 1.6px solid rgba(0,0,0,.14);
      background: var(--mint);
    }
    .voice[data-on="true"] .micDot{ background: #ff7ab7; }

    /* footer */
    footer{
      padding: 34px 0 60px;
      border-top: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.16);
    }
    .foot{
      display:flex;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      align-items:flex-end;
    }
    .foot small{ opacity:.75; line-height:1.45; font-weight: 700; }

    /* responsive */
    @media (max-width: 980px){
      .heroGrid{ grid-template-columns: 1fr; }
      .links{ display:none; }
      .impact{ grid-template-columns: 1fr; }
    }
    @media (max-width: 640px){
      .card{ grid-column: span 12; }
      .sticker, .scribble{ display:none; }
    }
  </style>
</head>

<body>
  <div class="paperBg"></div>
  <div class="grain"></div>
  <div class="halftone"></div>
  <div class="progress" id="progress"></div>

  <!-- Drawer -->
  <div class="drawer" id="drawer" data-open="false" aria-hidden="true">
    <div class="bg" id="drawerBg"></div>
    <div class="panel" role="dialog" aria-modal="true" aria-label="Menu">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
        <h3>MENU</h3>
        <button class="pill" id="closeDrawer" type="button" aria-label="Fechar">✕</button>
      </div>
      <a class="dLink" href="#why"><span>01</span> Porque funciona</a>
      <a class="dLink" href="#impact"><span>02</span> Impact Lab</a>
      <a class="dLink" href="#what"><span>03</span> O que fazemos</a>
      <a class="dLink" href="#process"><span>04</span> Processo</a>
      <a class="dLink" href="#youthreach"><span>05</span> YouthReach</a>
      <a class="dLink" href="#about"><span>06</span> Sobre</a>

      <div style="margin-top:auto; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="pill" id="openPalette2" type="button">
          Pesquisa
          <span class="kbd">Ctrl K</span>
        </button>
        <button class="pill" id="toggleLang2" type="button">PT / EN</button>
      </div>
    </div>
  </div>

  <!-- Command palette -->
  <div class="palette" id="palette" data-open="false" aria-hidden="true">
    <div class="bg" id="palBg"></div>
    <div class="modal" id="palModal" role="dialog" aria-modal="true" aria-label="Pesquisa">
      <div class="top">
        <input id="palInput" type="text" autocomplete="off" placeholder="Pesquisar… (ex.: impacto, processo, YouthReach)"/>
        <div class="hint">Esc</div>
      </div>
      <div class="list" id="palList"></div>
    </div>
  </div>

  <header>
    <div class="wrap">
      <div class="nav">
        <div class="brand">
          <div class="logoMark">A</div>
          <div>
            <div>ActivEU</div>
            <small>Solidarity Action Day em Portugal</small>
          </div>
        </div>

        <nav class="links" aria-label="Primary">
          <a class="navlink" data-id="why" href="#why">Porque funciona</a>
          <a class="navlink" data-id="impact" href="#impact">Impact Lab</a>
          <a class="navlink" data-id="what" href="#what">O que fazemos</a>
          <a class="navlink" data-id="process" href="#process">Processo</a>
          <a class="navlink" data-id="youthreach" href="#youthreach">YouthReach</a>
          <a class="navlink" data-id="about" href="#about">Sobre</a>
        </nav>

        <div class="actions">
          <button class="voice" id="voiceBtn" type="button" aria-label="Voice navigation" title="Diz: 'Ir para Impact', 'Ir para Processo'">
            <span class="micDot"></span>
            <span id="voiceLabel">Voice</span>
          </button>
          <button class="pill" id="openPalette" type="button">
            Pesquisa
            <span class="kbd">Ctrl K</span>
          </button>
          <button class="pill" id="toggleLang" type="button">PT / EN</button>
          <button class="menuBtn" id="menuBtn" type="button">MENU</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero" id="top" data-title="ActivEU">
      <div class="wrap">

        <!-- Stickers like Agenius -->
        <div class="sticker" data-tone="mint" style="left:22px; top:34px; --rot:-2.2deg;">Jovem</div>
        <div class="sticker" data-tone="sun"  style="left:154px; top:116px; --rot:1.8deg;">Solidária</div>
        <div class="sticker" data-tone="lav"  style="right:210px; top:44px; --rot:-1.2deg;">Europeia</div>
        <div class="sticker" data-tone="sky"  style="right:50px; top:132px; --rot:2.6deg;">Criativa</div>

        <!-- Scribbles/arrows -->
        <svg class="scribble" style="left:-8px; top:0; width:260px; height:140px;" viewBox="0 0 260 140" aria-hidden="true">
          <path d="M12 118 C42 76, 72 92, 98 56 C126 16, 160 34, 196 18 C218 8, 238 10, 250 20"
                fill="none" stroke="rgba(20,10,18,.85)" stroke-width="2.6" stroke-linecap="round"/>
          <path d="M236 22 l16 -4 l-8 14" fill="none" stroke="rgba(20,10,18,.85)" stroke-width="2.6" stroke-linecap="round"/>
        </svg>

        <div class="heroGrid">
          <div>
            <div class="heroTitle">ACTIVEU</div>
            <div class="tagline">O teu dia. A tua ação. O teu impacto.</div>
            <div class="micro">
              Trocas aulas por experiência real em contexto profissional, apoias uma causa verificada e ganhas competências certificadas.
            </div>

            <div class="ctaRow">
              <a class="cta" href="#impact">Experimenta o Impact Lab</a>
              <a class="cta secondary" href="#process">Ver como funciona</a>
            </div>
          </div>

          <aside class="heroCard sketch" data-sketch="card" aria-label="Resumo ActivEU">
            <div class="rings" aria-hidden="true"></div>
            <div class="inner">
              <h2>ActivEU Connect</h2>
              <p>
                Uma plataforma desenhada para confiança: verificação, matching justo, doação transparente e relatório de impacto.
              </p>

              <div class="stats">
                <div class="stat sketch" data-sketch="stat">
                  <b>1</b><span>dia = experiência real</span>
                </div>
                <div class="stat sketch" data-sketch="stat">
                  <b>0</b><span>viés (sem foto/nome)</span>
                </div>
                <div class="stat sketch" data-sketch="stat">
                  <b>✓</b><span>certificação</span>
                </div>
                <div class="stat sketch" data-sketch="stat">
                  <b>100%</b><span>doação rastreável</span>
                </div>
              </div>

              <div class="tiny" style="margin-top:10px;">
                Dica: Ctrl/⌘ + K para navegar. Ou usa Voice e diz: “Ir para Impact”.
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- WHY -->
    <section id="why" data-title="Porque funciona">
      <div class="scallopTop" aria-hidden="true"></div>
      <div class="scallopBottom" aria-hidden="true"></div>

      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> Uma ideia simples. Um impacto gigantesco.</div>
            <h2 class="sectionTitle">Porque funciona</h2>
            <p class="lead">
              O SAD cria valor simultâneo para jovens, empresas e causas. O desenho é intencional: rigor, utilidade e confiança.
            </p>
          </div>
        </div>

        <div class="grid">
          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">01</div>
            <h3>Jovens que transformam o seu futuro (e o dos outros)</h3>
            <p>Um dia em contexto profissional: descobres o que gostas, ganhas experiência e fazes a diferença.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">02</div>
            <h3>Empresas que descobrem talento com propósito</h3>
            <p>Testam compatibilidade, reforçam reputação social e encontram futuros colaboradores sem ruído.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">03</div>
            <h3>Causas que continuam o seu trabalho essencial</h3>
            <p>Doações verificadas e rastreáveis, com transparência. Menos fricção, mais continuidade.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">04</div>
            <h3>Meritocracia justa (sem enviesamentos óbvios)</h3>
            <p>Sem foto, sem nome, sem idade. O foco é compatibilidade e mérito real, não perceções.</p>
          </article>

          <article class="card full sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">05</div>
            <h3>Escala com integridade</h3>
            <p>Verificação prévia, regras claras, incentivos corretos e avaliação contínua para crescer sem perder qualidade.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- IMPACT LAB (the "2046" piece) -->
    <section id="impact" data-title="Impact Lab">
      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> Uma experiência “quase-app”, sem backend.</div>
            <h2 class="sectionTitle">Impact Lab</h2>
            <p class="lead">
              Simula impacto. Gera um snapshot partilhável. Navega por voz. Aqui vês tecnologia com propósito.
            </p>
          </div>
        </div>

        <div class="impact">
          <div class="panel sketch" data-sketch="card">
            <h3>Impact Simulator</h3>
            <p>Escolhe perfil e ajusta variáveis. A ActivEU devolve um “Impact Snapshot” e podes fazer download local.</p>

            <div class="controls">
              <div class="row">
                <label for="role">Perfil</label>
                <select id="role">
                  <option value="jovem">Jovem</option>
                  <option value="empresa">Empresa</option>
                  <option value="escola">Escola</option>
                  <option value="municipio">Município</option>
                </select>
              </div>

              <div class="row">
                <label for="participants">Participantes por mês</label>
                <input id="participants" type="range" min="10" max="2000" value="150" />
                <div class="tiny"><b id="participantsVal">150</b> participantes/mês</div>
              </div>

              <div class="row">
                <label for="donation">Doação média por dia (EUR)</label>
                <input id="donation" type="range" min="0" max="25" value="10" />
                <div class="tiny"><b id="donationVal">10</b> € por participação</div>
              </div>

              <div class="row">
                <label for="quality">Qualidade da experiência (0–100)</label>
                <input id="quality" type="range" min="40" max="100" value="86" />
                <div class="tiny"><b id="qualityVal">86</b>/100</div>
              </div>

              <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top: 6px;">
                <button class="cta secondary" id="copySnapshot" type="button">Copiar snapshot</button>
                <button class="cta" id="downloadSnapshot" type="button">Download snapshot</button>
              </div>
            </div>

            <div class="out sketch" data-sketch="box" id="snapshot"></div>
            <div class="tiny">Isto é client-side: não há tracking, não há cookies, não há “fake AI”. A experiência é real e respeita privacidade.</div>
          </div>

          <div class="panel sketch" data-sketch="card">
            <h3>Voice Navigation</h3>
            <p>Carrega no botão “Voice” e diz: “Ir para Impact”, “Ir para Processo”, “Ir para YouthReach”, “Abrir pesquisa”.</p>

            <div class="out sketch" data-sketch="box" id="voiceLog">Estado: pronto.</div>

            <div class="tiny">
              Nota: funciona em browsers com Web Speech API (Chrome/Edge geralmente). Se não existir, o botão mantém-se, mas sem erro.
            </div>

            <div style="margin-top:12px;">
              <button class="pill" id="openPalette3" type="button">Abrir pesquisa <span class="kbd">Ctrl K</span></button>
            </div>

            <div class="tiny" style="margin-top:10px;">
              Extra “2046”: este lab é uma demo de como a ActivEU pensa produto: explicável, útil, e com zero fricção.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHAT -->
    <section id="what" data-title="O que fazemos">
      <div class="scallopTop" aria-hidden="true"></div>
      <div class="scallopBottom" aria-hidden="true"></div>

      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> Tecnologia, solidariedade, educação.</div>
            <h2 class="sectionTitle">O que fazemos</h2>
            <p class="lead">Construímos infraestrutura de participação: simples no uso, robusta por dentro.</p>
          </div>
        </div>

        <div class="grid">
          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">A</div>
            <h3>ActivEU Connect</h3>
            <p>Matching meritocrático, verificação, doações rastreáveis e relatórios de impacto com certificação.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">B</div>
            <h3>SAD Permanente / SAD Anual</h3>
            <p>Duas modalidades para escalar impacto: contínuo com contribuição sugerida e anual para mobilização ampla.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">C</div>
            <h3>Projetos comunitários</h3>
            <p>Coesão social com desenho acessível: intergeracionalidade, cultura e inclusão em formatos replicáveis.</p>
          </article>

          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">D</div>
            <h3>YouthReach & Creative Support</h3>
            <p>Diagnóstico jovem, processos participativos, formação interna e comunicação institucional adaptada.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" data-title="Processo">
      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> Uma jornada clara (sem fricção).</div>
            <h2 class="sectionTitle">Processo</h2>
            <p class="lead">Registo rápido. Verificação simples. Matching justo. Experiência real. Impacto comprovável.</p>
          </div>
        </div>

        <div class="grid">
          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">01</div>
            <h3>Regista-te</h3>
            <p>Em poucos minutos. Ativação segura e transparente.</p>
          </article>
          <article class="card sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">02</div>
            <h3>Candidata-te</h3>
            <p>O algoritmo analisa compatibilidade (sem foto/nome/idade). Mérito e contexto, não perceção.</p>
          </article>
          <article class="card full sketch" data-sketch="card">
            <div class="badge sketch" data-sketch="badge">03</div>
            <h3>Participa e mede impacto</h3>
            <p>Concluis a experiência, escolhes a causa, e recebes certificação + relatório de impacto.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- YOUTHREACH -->
    <section id="youthreach" data-title="YouthReach">
      <div class="scallopTop" aria-hidden="true"></div>
      <div class="scallopBottom" aria-hidden="true"></div>

      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> ActivEU YouthReach & Creative Support</div>
            <h2 class="sectionTitle">Ajudamos entidades a chegar aos jovens</h2>
            <p class="lead">Diagnóstico rigoroso, participação estruturada, formação interna e comunicação adaptada.</p>
          </div>
        </div>

        <div class="grid">
          <article class="card full sketch" data-sketch="card">
            <h3>O que oferecemos</h3>
            <p>
              Diagnóstico Jovem local e organizacional • Metodologias participativas • Workshops e sessões de co-criação •
              Formação interna (trabalho com jovens, comunicação, participação contínua) • Orientação em narrativas • Apoio multimédia estratégico.
            </p>
          </article>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" data-title="Sobre">
      <div class="wrap">
        <div class="head">
          <div>
            <div class="kicker sketch" data-sketch="kicker"><i></i> Transparência. Impacto. Escala.</div>
            <h2 class="sectionTitle">Sobre a ActivEU</h2>
            <p class="lead">Uma associação jovem solidária europeia, com desenho institucional sério e ambição de referência.</p>
          </div>
        </div>

        <div class="grid">
          <article class="card full sketch" data-sketch="card">
            <h3>Missão</h3>
            <p>
              Empoderar jovens para serem cidadãos informados, críticos e solidários, ligando juventude, setor público, privado e sociedade civil.
            </p>
          </article>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <div class="foot">
          <div>
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="logoMark">A</div>
              <div style="font-weight:1000;">ActivEU</div>
            </div>
            <small style="display:block;margin-top:10px;">
              © <span id="year"></span> ActivEU. Offline-ready (PWA). Ctrl/⌘ + K. Voice nav.
            </small>
          </div>
          <small>
            Se isto não parece “desenhado” como o Agenius, então ainda não chegámos ao nível certo.
          </small>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // ----- Progress -----
    const progress = document.getElementById("progress");
    function onScroll(){
      const h = document.documentElement;
      const sc = h.scrollTop || document.body.scrollTop;
      const max = (h.scrollHeight - h.clientHeight) || 1;
      progress.style.width = (Math.max(0, Math.min(1, sc/max))*100).toFixed(2) + "%";
    }
    window.addEventListener("scroll", onScroll, {passive:true});
    onScroll();

    // ----- Drawer -----
    const drawer = document.getElementById("drawer");
    const menuBtn = document.getElementById("menuBtn");
    const closeDrawer = document.getElementById("closeDrawer");
    const drawerBg = document.getElementById("drawerBg");
    function openDrawer(){ drawer.dataset.open="true"; drawer.setAttribute("aria-hidden","false"); }
    function closeDrawerFn(){ drawer.dataset.open="false"; drawer.setAttribute("aria-hidden","true"); }
    menuBtn.addEventListener("click", openDrawer);
    closeDrawer.addEventListener("click", closeDrawerFn);
    drawerBg.addEventListener("click", closeDrawerFn);

    // close drawer on link click
    document.querySelectorAll(".dLink").forEach(a=>{
      a.addEventListener("click", ()=>setTimeout(closeDrawerFn, 60));
    });

    // ----- Active section highlight -----
    const sections = Array.from(document.querySelectorAll("main section[id]"));
    const navLinks = Array.from(document.querySelectorAll(".navlink"));
    const io = new IntersectionObserver((entries)=>{
      const visible = entries.filter(e=>e.isIntersecting).sort((a,b)=>b.intersectionRatio-a.intersectionRatio)[0];
      if(!visible) return;
      const id = visible.target.id;
      navLinks.forEach(a=> a.dataset.active = (a.dataset.id===id) ? "true" : "false");
    }, {threshold:[0.18,0.28,0.38,0.55]});
    sections.forEach(s=>io.observe(s));

    // ----- Command palette -----
    const palette = document.getElementById("palette");
    const palBg = document.getElementById("palBg");
    const palInput = document.getElementById("palInput");
    const palList = document.getElementById("palList");
    const palModal = document.getElementById("palModal");

    const openPaletteBtns = ["openPalette","openPalette2","openPalette3"].map(id=>document.getElementById(id)).filter(Boolean);

    function openPalette(){
      palette.dataset.open="true";
      palette.setAttribute("aria-hidden","false");
      palInput.value="";
      renderItems("");
      setTimeout(()=>palInput.focus(), 40);
      sketchOnce(palModal);
    }
    function closePalette(){
      palette.dataset.open="false";
      palette.setAttribute("aria-hidden","true");
    }
    openPaletteBtns.forEach(btn=>btn.addEventListener("click", openPalette));
    palBg.addEventListener("click", closePalette);

    document.addEventListener("keydown",(e)=>{
      const isMac = navigator.platform.toLowerCase().includes("mac");
      const mod = isMac ? e.metaKey : e.ctrlKey;
      if(mod && e.key.toLowerCase()==="k"){
        e.preventDefault();
        palette.dataset.open==="true" ? closePalette() : openPalette();
      }
      if(e.key==="Escape"){
        if(palette.dataset.open==="true") closePalette();
        if(drawer.dataset.open==="true") closeDrawerFn();
      }
    });

    const searchData = sections.map(sec=>{
      const title = sec.getAttribute("data-title") || sec.id;
      const text = (sec.innerText || "").replace(/\s+/g," ").trim();
      return {id: sec.id, title, text};
    });

    function getFuse(){
      if(typeof Fuse === "undefined") return null;
      return new Fuse(searchData, {keys:["title","text"], threshold:0.35, ignoreLocation:true, minMatchCharLength:2});
    }
    let fuse=null;

    function renderItems(q){
      palList.innerHTML="";
      if(!fuse) fuse = getFuse();
      let results=[];
      if(!q) results = searchData.map(x=>({item:x})).slice(0, 8);
      else if(fuse) results = fuse.search(q).slice(0, 10);
      else {
        const qq=q.toLowerCase();
        results = searchData.filter(x=>x.title.toLowerCase().includes(qq)||x.text.toLowerCase().includes(qq)).slice(0, 10).map(x=>({item:x}));
      }
      results.forEach((r,i)=>{
        const it=r.item;
        const div=document.createElement("div");
        div.className="item sketch";
        div.dataset.sketch="item";
        div.innerHTML = `<span>${escapeHtml(it.title)}</span><small>#${String(i+1).padStart(2,"0")}</small>`;
        div.addEventListener("click", ()=>{
          closePalette();
          document.getElementById(it.id).scrollIntoView({behavior:"smooth", block:"start"});
        });
        palList.appendChild(div);
        sketchOnce(div);
      });

      if(results.length===0){
        const empty=document.createElement("div");
        empty.style.padding="14px";
        empty.style.opacity=".75";
        empty.style.fontWeight="1000";
        empty.textContent="Sem resultados.";
        palList.appendChild(empty);
      }
    }
    palInput.addEventListener("input",(e)=>renderItems(e.target.value||""));
    function escapeHtml(s){return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");}

    // ----- Impact Simulator -----
    const role = document.getElementById("role");
    const participants = document.getElementById("participants");
    const donation = document.getElementById("donation");
    const quality = document.getElementById("quality");

    const participantsVal = document.getElementById("participantsVal");
    const donationVal = document.getElementById("donationVal");
    const qualityVal = document.getElementById("qualityVal");
    const snapshot = document.getElementById("snapshot");

    function fmt(n){ return new Intl.NumberFormat("pt-PT").format(n); }

    function compute(){
      const r = role.value;
      const p = Number(participants.value);
      const d = Number(donation.value);
      const q = Number(quality.value);

      participantsVal.textContent = p;
      donationVal.textContent = d;
      qualityVal.textContent = q;

      const monthlyDonation = p * d;
      const annualDonation = monthlyDonation * 12;

      // heuristic “impact index” – intentionally explainable, not “AI theater”
      const trust = Math.min(100, Math.round(40 + (q*0.6) + (d*1.2)));
      const employability = Math.min(100, Math.round(30 + (q*0.7) + (Math.log10(p+1)*12)));
      const scale = Math.min(100, Math.round(25 + (Math.log10(p+1)*22) + (d*1.0)));

      const focus =
        r === "jovem" ? "Competências + clareza de vocação"
        : r === "empresa" ? "Descoberta de talento + reputação"
        : r === "escola" ? "Aprendizagem + cidadania"
        : "Política pública jovem + mobilização";

      const text =
`IMPACT SNAPSHOT (client-side)
Perfil: ${r.toUpperCase()}
Foco: ${focus}

Participantes/mês: ${fmt(p)}
Doação média: €${fmt(d)}

Doação estimada:
• mensal: €${fmt(monthlyDonation)}
• anual:  €${fmt(annualDonation)}

Índices (0–100):
• Confiança pública: ${trust}
• Empregabilidade/competências: ${employability}
• Escalabilidade: ${scale}

Nota:
Isto não é “IA decorativa”. São métricas explicáveis
para tornar o impacto legível e partilhável.`;

      snapshot.textContent = text;
    }
    [role, participants, donation, quality].forEach(el=> el.addEventListener("input", compute));
    compute();

    // copy / download
    document.getElementById("copySnapshot").addEventListener("click", async ()=>{
      try{
        await navigator.clipboard.writeText(snapshot.textContent);
      }catch(e){
        // fallback
        const ta=document.createElement("textarea");
        ta.value=snapshot.textContent;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
      }
    });
    document.getElementById("downloadSnapshot").addEventListener("click", ()=>{
      const blob = new Blob([snapshot.textContent], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "activeu-impact-snapshot.txt";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // ----- Voice Navigation (Web Speech API) -----
    const voiceBtn = document.getElementById("voiceBtn");
    const voiceLabel = document.getElementById("voiceLabel");
    const voiceLog = document.getElementById("voiceLog");

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let rec = null;
    let voiceOn = false;

    function logVoice(msg){ voiceLog.textContent = msg; sketchOnce(voiceLog); }

    function goTo(id){
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
    }
    function handleVoice(text){
      const t = (text||"").toLowerCase();

      if(t.includes("abrir") && (t.includes("pesquisa") || t.includes("search"))){
        openPalette();
        return "A abrir pesquisa.";
      }
      if(t.includes("impact")){ goTo("impact"); return "A ir para Impact Lab."; }
      if(t.includes("process")){ goTo("process"); return "A ir para Processo."; }
      if(t.includes("youth")){ goTo("youthreach"); return "A ir para YouthReach."; }
      if(t.includes("sobre") || t.includes("about")){ goTo("about"); return "A ir para Sobre."; }
      if(t.includes("porque") || t.includes("why")){ goTo("why"); return "A ir para Porque funciona."; }
      if(t.includes("o que fazemos") || (t.includes("fazemos") && t.includes("que")) || t.includes("what")){ goTo("what"); return "A ir para O que fazemos."; }

      return "Não percebi. Diz: 'Ir para Impact', 'Ir para Processo', 'Abrir pesquisa'.";
    }

    if(SpeechRecognition){
      rec = new SpeechRecognition();
      rec.lang = "pt-PT";
      rec.continuous = true;
      rec.interimResults = false;

      rec.onresult = (e)=>{
        const last = e.results[e.results.length-1];
        const text = last[0].transcript.trim();
        const reply = handleVoice(text);
        logVoice(`Ouvi: "${text}"\n${reply}`);
      };
      rec.onerror = (e)=>{
        logVoice(`Voice erro: ${e.error || "desconhecido"}`);
        voiceOn = false;
        voiceBtn.dataset.on="false";
        voiceLabel.textContent = "Voice";
      };
      rec.onend = ()=>{
        if(voiceOn){
          try{ rec.start(); }catch(_){}
        }
      };

      voiceBtn.addEventListener("click", ()=>{
        voiceOn = !voiceOn;
        voiceBtn.dataset.on = voiceOn ? "true" : "false";
        voiceLabel.textContent = voiceOn ? "Listening" : "Voice";
        if(voiceOn){
          logVoice("Estado: a ouvir… Diz: 'Ir para Impact' ou 'Abrir pesquisa'.");
          try{ rec.start(); }catch(e){ logVoice("Não consegui iniciar Voice."); voiceOn=false; }
        }else{
          try{ rec.stop(); }catch(_){}
          logVoice("Estado: parado.");
        }
      });
    }else{
      voiceBtn.addEventListener("click", ()=>{
        logVoice("Voice não suportado neste browser. Usa Ctrl/⌘ + K para navegar.");
      });
    }

    // ----- Language toggle (simple for now) -----
    function toggleLang(){
      const cur = document.documentElement.dataset.lang || "pt";
      document.documentElement.dataset.lang = (cur==="pt") ? "en" : "pt";
      // (para já mantive PT como base. Se quiseres, faço i18n total como no anterior, mas com este visual.)
    }
    document.getElementById("toggleLang").addEventListener("click", toggleLang);
    document.getElementById("toggleLang2").addEventListener("click", toggleLang);

    // ----- Rough.js: draw hand-drawn borders for elements -----
    function sketchOnce(el){
      if(!window.rough || !el) return;
      if(el.dataset.sketched==="true") return;

      const rect = el.getBoundingClientRect();
      if(rect.width < 8 || rect.height < 8) return;

      const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
      svg.setAttribute("width", rect.width);
      svg.setAttribute("height", rect.height);
      svg.style.position = "absolute";
      svg.style.left = "0";
      svg.style.top = "0";
      svg.style.pointerEvents = "none";
      svg.style.zIndex = "0";
      svg.style.overflow = "visible";

      el.style.position = el.style.position || "relative";
      el.style.zIndex = "1";

      const rc = rough.svg(svg);
      const type = el.dataset.sketch || "card";

      let opts = {
        stroke: "rgba(20,10,18,.85)",
        strokeWidth: 1.7,
        roughness: 1.8,
        bowing: 1.2,
        fill: "transparent"
      };

      if(type==="kicker" || type==="badge" || type==="item"){
        opts.strokeWidth = 1.5;
        opts.roughness = 2.0;
      }
      if(type==="box"){
        opts.strokeWidth = 1.8;
        opts.roughness = 2.2;
      }

      const node = rc.rectangle(2,2, rect.width-4, rect.height-4, opts);
      svg.appendChild(node);

      // inject behind content
      el.insertBefore(svg, el.firstChild);
      el.dataset.sketched = "true";
    }

    function sketchAll(){
      document.querySelectorAll(".sketch").forEach(sketchOnce);
    }
    window.addEventListener("load", ()=>{
      sketchAll();
      // resize observer to re-sketch if layout changes
      const ro = new ResizeObserver((entries)=>{
        for(const e of entries){
          const el = e.target;
          // remove old svg and redraw
          const old = el.querySelector(":scope > svg");
          if(old) old.remove();
          el.dataset.sketched = "false";
          sketchOnce(el);
        }
      });
      document.querySelectorAll(".sketch").forEach(el=> ro.observe(el));
    });

    // subtle magnet hover for stickers (desktop)
    const stickers = Array.from(document.querySelectorAll(".sticker"));
    window.addEventListener("mousemove", (e)=>{
      if(window.matchMedia("(max-width: 640px)").matches) return;
      stickers.forEach(s=>{
        const r = s.getBoundingClientRect();
        const cx = r.left + r.width/2;
        const cy = r.top + r.height/2;
        const dx = (e.clientX - cx);
        const dy = (e.clientY - cy);
        const dist = Math.sqrt(dx*dx + dy*dy);
        const pull = Math.max(0, 1 - dist/260);
        const tx = dx * 0.06 * pull;
        const ty = dy * 0.06 * pull;
        s.style.transform = `translate(${tx}px, ${ty}px) rotate(${getComputedStyle(s).getPropertyValue("--rot")})`;
      });
    }, {passive:true});

    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // ----- PWA Service Worker register -----
    if("serviceWorker" in navigator){
      window.addEventListener("load", ()=>{
        navigator.serviceWorker.register("/sw.js").catch(()=>{});
      });
    }
  </script>
</body>
</html>
